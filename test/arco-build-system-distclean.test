#!/usr/bin/python
# -*- mode:python; coding:utf-8; tab-width:4 -*-

import os

ENV = {'ARCO_MK':os.path.abspath('make')}

Command('make -C samples/make', env=ENV)

distclean = Test('make -C samples/make  distclean', env=ENV)

for lib in ['liba','libb','libd']:
    for suffix in ['.so', '.so.23', '.so.2.3', '.a']:
        distclean.post += Not(FileExists(os.path.join('samples/make/lib/',lib+suffix)))

    lib_path = os.path.join('samples/make/include/',lib)
    distclean.post += Not(DirExists(lib_path))
    distclean.post += Not(FileExists(os.path.join(lib_path, lib[3:]+'.h')))

distclean.post += Not(FileExists('samples/make/bin/main'))

for d in ['lib', 'include', 'bin']:
    distclean.post += Not(DirExists('samples/make/'+d))

